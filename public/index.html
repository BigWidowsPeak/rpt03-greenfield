<!DOCTYPE html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
  <script src="login.js"></script>
  <title>Get Ready for Harbour Power!</title>
  <link rel="stylesheet" src="stylesheets/main.css"></link>


<style type="text/css">

  .wrapper {
    display: grid;
    grid-template-columns: 1fr 3fr;
    margin: 20px 200px 20px 102px;
    border-style: groove;
  }

  h2 {
    font-family: 'Roboto Slab', serif;
    font-size: 2em;
  }



</style>

</head>
<body>
  <div class="wrapper">
    <div>
      <form id="login">
        <h2>Please log in:</h2>
        <input type="text" name="userName" placeholder="Enter your name"/><br />
        <button>Submit</button>
      </form>
    </div>
    <div>
      <img src="hack-reactor-logo.png" width="100%">
    </div>
  </div>

  <script>$(function() {
    var form = $('#login');
    var formMessages = $('#form.messages');
    $(form).submit( (event) => {
      event.preventDefault();
      var formData = $(form).serialize().split('=')[1].split('&')[0].replace('%20', ' ')
      //Deal with it!
      $.ajax({
         url: 'api/users/' + formData,
         type: 'GET',
         success: (data) => {
           console.log('data in success is ', data);
           if (data !== null) {
             window.location.replace('./videoConference.html');
           } else {
             window.location.replace('./createUser.html');
           }
         },
         error: () => {
           console.log('error in ajax ', err)
         }
       })
    })
  })</script>
</body>
</html>