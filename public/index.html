<!DOCTYPE html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
  <script src="login.js"></script>
  <title>Get Ready for Harbour Power!</title>
  <link rel="stylesheet" src="stylesheets/main.css"></link>


<style type="text/css">

  .wrapper {
    display: grid;
    grid-template-columns: 1fr 3fr;
    margin: 20px 200px 20px 102px;
    border-bottom-style: groove;
  }


</style>

</head>
<body>
  <div class="wrapper">
    <div>
      <form id="login">
        <span>Please log in</span>
        <input type="text" name="userName" placeholder="Enter yout name"/><br />
        <button>Submit</button>
      </form>
    </div>
    <div>
      <img src="download.png" width="100%">
    </div>
  </div>

  <script>$(function() {
    var form = $('#login');
    var formMessages = $('#form.messages');
    //console.log('form messages looks like ', formMessages);
    $(form).submit(function(event) {
      event.preventDefault();
      console.log('event is ', event);
      var formData = $(form).serialize().split('=')[1].split('&')[0].replace('%20', ' ')
      //Deal with it!
      console.log('form data is ', formData)
      $.ajax({
         url: 'api/users/' + formData,
         type: 'GET',
         success: function(data) {
           console.log('data in success is ', data);
           if (data !== null) {
             window.location.replace('./videoConference.html');
           } else {
             window.location.replace('./createUser.html');
           }
         },
         error: function() {
           console.log('error in ajax ', err)
         }
       })
    })
    // $('#login').submit(function(event, data) {
    //   event.preventDefault();
    //   console.log('event is ', event);
    //   console.log('data is ', data);
    // })
  })</script>
</body>
</html>